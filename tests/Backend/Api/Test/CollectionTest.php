<?php
/*
 * Fusio is an open source API management platform which helps to create innovative API solutions.
 * For the current version and information visit <https://www.fusio-project.org/>
 *
 * Copyright (c) Christoph Kappestein <christoph.kappestein@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

namespace Fusio\Impl\Tests\Backend\Api\Test;

use Fusio\Impl\Tests\DbTestCase;

/**
 * CollectionTest
 *
 * @author  Christoph Kappestein <christoph.kappestein@gmail.com>
 * @license http://www.apache.org/licenses/LICENSE-2.0
 * @link    https://www.fusio-project.org
 */
class CollectionTest extends DbTestCase
{
    public function testGet()
    {
        $this->sendRequest('/backend/test', 'PUT', array(
            'User-Agent'    => 'Fusio TestCase',
            'Authorization' => 'Bearer da250526d583edabca8ac2f99e37ee39aa02a3c076c0edc6929095e20ca18dcf'
        ), json_encode([
        ]));

        $this->sendRequest('/backend/test', 'POST', array(
            'User-Agent'    => 'Fusio TestCase',
            'Authorization' => 'Bearer da250526d583edabca8ac2f99e37ee39aa02a3c076c0edc6929095e20ca18dcf'
        ), json_encode([
        ]));

        $response = $this->sendRequest('/backend/test', 'GET', array(
            'User-Agent'    => 'Fusio TestCase',
            'Authorization' => 'Bearer da250526d583edabca8ac2f99e37ee39aa02a3c076c0edc6929095e20ca18dcf'
        ));

        $body   = (string) $response->getBody();
        $expect = <<<'JSON'
{
    "totalResults": 13,
    "startIndex": 0,
    "itemsPerPage": 16,
    "entry": [
        {
            "id": 13,
            "status": 4,
            "operationName": "mime.xml",
            "message": "Error: Schema mime:\/\/application\/xml does not exist\n#0 C:\\www\\projects\\fusio-impl\\src\\Service\\Test\\Runner.php(135): PSX\\Schema\\SchemaManager->getSchema(Object(PSX\\Schema\\SchemaSource))\n#1 C:\\www\\projects\\fusio-impl\\src\\Service\\Test.php(97): Fusio\\Impl\\Service\\Test\\Runner->run(Object(Fusio\\Impl\\Table\\Generated\\TestRow), Object(Fusio\\Impl\\Table\\Generated\\OperationRow), Object(PSX\\OAuth2\\AccessToken))\n#2 C:\\www\\projects\\fusio-impl\\src\\Backend\\Action\\Test\\Run.php(50): Fusio\\Impl\\Service\\Test->run(Object(Fusio\\Impl\\Authorization\\UserContext))\n#3 C:\\www\\projects\\fusio-impl\\vendor\\fusio\\engine\\src\\Processor.php(67): Fusio\\Impl\\Backend\\Action\\Test\\Run->handle(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Parameters), Object(Fusio\\Engine\\Context))\n#4 C:\\www\\projects\\fusio-impl\\src\\Service\\Action\\Invoker.php(78): Fusio\\Engine\\Processor->execute('php+class:\/\/Fus...', Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#5 C:\\www\\projects\\fusio-impl\\src\\Controller\\ActionController.php(60): Fusio\\Impl\\Service\\Action\\Invoker->invoke(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#6 C:\\www\\projects\\fusio-impl\\src\\Framework\\Filter\\ActionExecutor.php(91): Fusio\\Impl\\Controller\\ActionController->execute(Object(Fusio\\Engine\\Request), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#7 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Framework\\Filter\\ActionExecutor->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#8 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Logger.php(60): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#9 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Logger->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#10 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\RequestLimit.php(63): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#11 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\RequestLimit->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#12 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Authentication.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#13 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Authentication->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#14 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Operation.php(91): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#15 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Operation->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#16 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Tenant.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#17 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Tenant->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#18 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\UserAgentEnforcer.php(43): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#19 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\UserAgentEnforcer->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#20 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\CORS.php(86): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#21 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\CORS->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#22 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(97): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#23 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(72): PSX\\Framework\\Loader\\Loader->execute(Array, Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#24 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Dispatch\\Dispatch.php(86): PSX\\Framework\\Loader\\Loader->load(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#25 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(44): PSX\\Framework\\Dispatch\\Dispatch->route(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#26 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(56): PSX\\Framework\\Test\\ControllerDbTestCase->loadController(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#27 C:\\www\\projects\\fusio-impl\\tests\\Backend\\Api\\Test\\CollectionTest.php(42): PSX\\Framework\\Test\\ControllerDbTestCase->sendRequest('\/backend\/test', 'POST', Array, '[]')\n#28 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest->testGet()\n#29 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(686): PHPUnit\\Framework\\TestCase->runTest()\n#30 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(105): PHPUnit\\Framework\\TestCase->runBare()\n#31 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(516): PHPUnit\\Framework\\TestRunner->run(Object(Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest))\n#32 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestCase->run()\n#33 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestSuite->run()\n#34 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(64): PHPUnit\\Framework\\TestSuite->run()\n#35 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(203): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\n#36 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\n#37 {main}"
        },
        {
            "id": 12,
            "status": 4,
            "operationName": "mime.text",
            "message": "Error: Schema mime:\/\/text\/plain does not exist\n#0 C:\\www\\projects\\fusio-impl\\src\\Service\\Test\\Runner.php(135): PSX\\Schema\\SchemaManager->getSchema(Object(PSX\\Schema\\SchemaSource))\n#1 C:\\www\\projects\\fusio-impl\\src\\Service\\Test.php(97): Fusio\\Impl\\Service\\Test\\Runner->run(Object(Fusio\\Impl\\Table\\Generated\\TestRow), Object(Fusio\\Impl\\Table\\Generated\\OperationRow), Object(PSX\\OAuth2\\AccessToken))\n#2 C:\\www\\projects\\fusio-impl\\src\\Backend\\Action\\Test\\Run.php(50): Fusio\\Impl\\Service\\Test->run(Object(Fusio\\Impl\\Authorization\\UserContext))\n#3 C:\\www\\projects\\fusio-impl\\vendor\\fusio\\engine\\src\\Processor.php(67): Fusio\\Impl\\Backend\\Action\\Test\\Run->handle(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Parameters), Object(Fusio\\Engine\\Context))\n#4 C:\\www\\projects\\fusio-impl\\src\\Service\\Action\\Invoker.php(78): Fusio\\Engine\\Processor->execute('php+class:\/\/Fus...', Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#5 C:\\www\\projects\\fusio-impl\\src\\Controller\\ActionController.php(60): Fusio\\Impl\\Service\\Action\\Invoker->invoke(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#6 C:\\www\\projects\\fusio-impl\\src\\Framework\\Filter\\ActionExecutor.php(91): Fusio\\Impl\\Controller\\ActionController->execute(Object(Fusio\\Engine\\Request), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#7 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Framework\\Filter\\ActionExecutor->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#8 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Logger.php(60): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#9 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Logger->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#10 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\RequestLimit.php(63): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#11 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\RequestLimit->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#12 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Authentication.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#13 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Authentication->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#14 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Operation.php(91): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#15 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Operation->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#16 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Tenant.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#17 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Tenant->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#18 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\UserAgentEnforcer.php(43): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#19 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\UserAgentEnforcer->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#20 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\CORS.php(86): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#21 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\CORS->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#22 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(97): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#23 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(72): PSX\\Framework\\Loader\\Loader->execute(Array, Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#24 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Dispatch\\Dispatch.php(86): PSX\\Framework\\Loader\\Loader->load(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#25 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(44): PSX\\Framework\\Dispatch\\Dispatch->route(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#26 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(56): PSX\\Framework\\Test\\ControllerDbTestCase->loadController(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#27 C:\\www\\projects\\fusio-impl\\tests\\Backend\\Api\\Test\\CollectionTest.php(42): PSX\\Framework\\Test\\ControllerDbTestCase->sendRequest('\/backend\/test', 'POST', Array, '[]')\n#28 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest->testGet()\n#29 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(686): PHPUnit\\Framework\\TestCase->runTest()\n#30 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(105): PHPUnit\\Framework\\TestCase->runBare()\n#31 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(516): PHPUnit\\Framework\\TestRunner->run(Object(Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest))\n#32 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestCase->run()\n#33 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestSuite->run()\n#34 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(64): PHPUnit\\Framework\\TestSuite->run()\n#35 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(203): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\n#36 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\n#37 {main}"
        },
        {
            "id": 11,
            "status": 4,
            "operationName": "mime.multipart",
            "message": "Error: Schema mime:\/\/multipart\/form-data does not exist\n#0 C:\\www\\projects\\fusio-impl\\src\\Service\\Test\\Runner.php(135): PSX\\Schema\\SchemaManager->getSchema(Object(PSX\\Schema\\SchemaSource))\n#1 C:\\www\\projects\\fusio-impl\\src\\Service\\Test.php(97): Fusio\\Impl\\Service\\Test\\Runner->run(Object(Fusio\\Impl\\Table\\Generated\\TestRow), Object(Fusio\\Impl\\Table\\Generated\\OperationRow), Object(PSX\\OAuth2\\AccessToken))\n#2 C:\\www\\projects\\fusio-impl\\src\\Backend\\Action\\Test\\Run.php(50): Fusio\\Impl\\Service\\Test->run(Object(Fusio\\Impl\\Authorization\\UserContext))\n#3 C:\\www\\projects\\fusio-impl\\vendor\\fusio\\engine\\src\\Processor.php(67): Fusio\\Impl\\Backend\\Action\\Test\\Run->handle(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Parameters), Object(Fusio\\Engine\\Context))\n#4 C:\\www\\projects\\fusio-impl\\src\\Service\\Action\\Invoker.php(78): Fusio\\Engine\\Processor->execute('php+class:\/\/Fus...', Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#5 C:\\www\\projects\\fusio-impl\\src\\Controller\\ActionController.php(60): Fusio\\Impl\\Service\\Action\\Invoker->invoke(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#6 C:\\www\\projects\\fusio-impl\\src\\Framework\\Filter\\ActionExecutor.php(91): Fusio\\Impl\\Controller\\ActionController->execute(Object(Fusio\\Engine\\Request), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#7 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Framework\\Filter\\ActionExecutor->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#8 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Logger.php(60): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#9 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Logger->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#10 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\RequestLimit.php(63): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#11 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\RequestLimit->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#12 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Authentication.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#13 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Authentication->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#14 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Operation.php(91): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#15 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Operation->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#16 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Tenant.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#17 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Tenant->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#18 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\UserAgentEnforcer.php(43): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#19 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\UserAgentEnforcer->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#20 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\CORS.php(86): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#21 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\CORS->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#22 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(97): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#23 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(72): PSX\\Framework\\Loader\\Loader->execute(Array, Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#24 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Dispatch\\Dispatch.php(86): PSX\\Framework\\Loader\\Loader->load(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#25 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(44): PSX\\Framework\\Dispatch\\Dispatch->route(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#26 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(56): PSX\\Framework\\Test\\ControllerDbTestCase->loadController(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#27 C:\\www\\projects\\fusio-impl\\tests\\Backend\\Api\\Test\\CollectionTest.php(42): PSX\\Framework\\Test\\ControllerDbTestCase->sendRequest('\/backend\/test', 'POST', Array, '[]')\n#28 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest->testGet()\n#29 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(686): PHPUnit\\Framework\\TestCase->runTest()\n#30 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(105): PHPUnit\\Framework\\TestCase->runBare()\n#31 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(516): PHPUnit\\Framework\\TestRunner->run(Object(Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest))\n#32 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestCase->run()\n#33 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestSuite->run()\n#34 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(64): PHPUnit\\Framework\\TestSuite->run()\n#35 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(203): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\n#36 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\n#37 {main}"
        },
        {
            "id": 10,
            "status": 4,
            "operationName": "mime.json",
            "message": "Error: Schema mime:\/\/application\/json does not exist\n#0 C:\\www\\projects\\fusio-impl\\src\\Service\\Test\\Runner.php(135): PSX\\Schema\\SchemaManager->getSchema(Object(PSX\\Schema\\SchemaSource))\n#1 C:\\www\\projects\\fusio-impl\\src\\Service\\Test.php(97): Fusio\\Impl\\Service\\Test\\Runner->run(Object(Fusio\\Impl\\Table\\Generated\\TestRow), Object(Fusio\\Impl\\Table\\Generated\\OperationRow), Object(PSX\\OAuth2\\AccessToken))\n#2 C:\\www\\projects\\fusio-impl\\src\\Backend\\Action\\Test\\Run.php(50): Fusio\\Impl\\Service\\Test->run(Object(Fusio\\Impl\\Authorization\\UserContext))\n#3 C:\\www\\projects\\fusio-impl\\vendor\\fusio\\engine\\src\\Processor.php(67): Fusio\\Impl\\Backend\\Action\\Test\\Run->handle(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Parameters), Object(Fusio\\Engine\\Context))\n#4 C:\\www\\projects\\fusio-impl\\src\\Service\\Action\\Invoker.php(78): Fusio\\Engine\\Processor->execute('php+class:\/\/Fus...', Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#5 C:\\www\\projects\\fusio-impl\\src\\Controller\\ActionController.php(60): Fusio\\Impl\\Service\\Action\\Invoker->invoke(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#6 C:\\www\\projects\\fusio-impl\\src\\Framework\\Filter\\ActionExecutor.php(91): Fusio\\Impl\\Controller\\ActionController->execute(Object(Fusio\\Engine\\Request), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#7 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Framework\\Filter\\ActionExecutor->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#8 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Logger.php(60): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#9 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Logger->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#10 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\RequestLimit.php(63): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#11 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\RequestLimit->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#12 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Authentication.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#13 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Authentication->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#14 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Operation.php(91): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#15 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Operation->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#16 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Tenant.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#17 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Tenant->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#18 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\UserAgentEnforcer.php(43): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#19 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\UserAgentEnforcer->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#20 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\CORS.php(86): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#21 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\CORS->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#22 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(97): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#23 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(72): PSX\\Framework\\Loader\\Loader->execute(Array, Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#24 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Dispatch\\Dispatch.php(86): PSX\\Framework\\Loader\\Loader->load(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#25 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(44): PSX\\Framework\\Dispatch\\Dispatch->route(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#26 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(56): PSX\\Framework\\Test\\ControllerDbTestCase->loadController(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#27 C:\\www\\projects\\fusio-impl\\tests\\Backend\\Api\\Test\\CollectionTest.php(42): PSX\\Framework\\Test\\ControllerDbTestCase->sendRequest('\/backend\/test', 'POST', Array, '[]')\n#28 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest->testGet()\n#29 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(686): PHPUnit\\Framework\\TestCase->runTest()\n#30 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(105): PHPUnit\\Framework\\TestCase->runBare()\n#31 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(516): PHPUnit\\Framework\\TestRunner->run(Object(Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest))\n#32 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestCase->run()\n#33 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestSuite->run()\n#34 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(64): PHPUnit\\Framework\\TestSuite->run()\n#35 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(203): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\n#36 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\n#37 {main}"
        },
        {
            "id": 9,
            "status": 4,
            "operationName": "mime.form",
            "message": "Error: Schema mime:\/\/application\/x-www-form-urlencoded does not exist\n#0 C:\\www\\projects\\fusio-impl\\src\\Service\\Test\\Runner.php(135): PSX\\Schema\\SchemaManager->getSchema(Object(PSX\\Schema\\SchemaSource))\n#1 C:\\www\\projects\\fusio-impl\\src\\Service\\Test.php(97): Fusio\\Impl\\Service\\Test\\Runner->run(Object(Fusio\\Impl\\Table\\Generated\\TestRow), Object(Fusio\\Impl\\Table\\Generated\\OperationRow), Object(PSX\\OAuth2\\AccessToken))\n#2 C:\\www\\projects\\fusio-impl\\src\\Backend\\Action\\Test\\Run.php(50): Fusio\\Impl\\Service\\Test->run(Object(Fusio\\Impl\\Authorization\\UserContext))\n#3 C:\\www\\projects\\fusio-impl\\vendor\\fusio\\engine\\src\\Processor.php(67): Fusio\\Impl\\Backend\\Action\\Test\\Run->handle(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Parameters), Object(Fusio\\Engine\\Context))\n#4 C:\\www\\projects\\fusio-impl\\src\\Service\\Action\\Invoker.php(78): Fusio\\Engine\\Processor->execute('php+class:\/\/Fus...', Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#5 C:\\www\\projects\\fusio-impl\\src\\Controller\\ActionController.php(60): Fusio\\Impl\\Service\\Action\\Invoker->invoke(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#6 C:\\www\\projects\\fusio-impl\\src\\Framework\\Filter\\ActionExecutor.php(91): Fusio\\Impl\\Controller\\ActionController->execute(Object(Fusio\\Engine\\Request), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#7 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Framework\\Filter\\ActionExecutor->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#8 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Logger.php(60): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#9 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Logger->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#10 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\RequestLimit.php(63): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#11 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\RequestLimit->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#12 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Authentication.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#13 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Authentication->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#14 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Operation.php(91): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#15 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Operation->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#16 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Tenant.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#17 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Tenant->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#18 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\UserAgentEnforcer.php(43): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#19 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\UserAgentEnforcer->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#20 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\CORS.php(86): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#21 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\CORS->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#22 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(97): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#23 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(72): PSX\\Framework\\Loader\\Loader->execute(Array, Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#24 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Dispatch\\Dispatch.php(86): PSX\\Framework\\Loader\\Loader->load(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#25 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(44): PSX\\Framework\\Dispatch\\Dispatch->route(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#26 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(56): PSX\\Framework\\Test\\ControllerDbTestCase->loadController(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#27 C:\\www\\projects\\fusio-impl\\tests\\Backend\\Api\\Test\\CollectionTest.php(42): PSX\\Framework\\Test\\ControllerDbTestCase->sendRequest('\/backend\/test', 'POST', Array, '[]')\n#28 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest->testGet()\n#29 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(686): PHPUnit\\Framework\\TestCase->runTest()\n#30 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(105): PHPUnit\\Framework\\TestCase->runBare()\n#31 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(516): PHPUnit\\Framework\\TestRunner->run(Object(Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest))\n#32 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestCase->run()\n#33 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestSuite->run()\n#34 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(64): PHPUnit\\Framework\\TestSuite->run()\n#35 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(203): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\n#36 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\n#37 {main}"
        },
        {
            "id": 8,
            "status": 4,
            "operationName": "mime.binary",
            "message": "Error: Schema mime:\/\/application\/octet-stream does not exist\n#0 C:\\www\\projects\\fusio-impl\\src\\Service\\Test\\Runner.php(135): PSX\\Schema\\SchemaManager->getSchema(Object(PSX\\Schema\\SchemaSource))\n#1 C:\\www\\projects\\fusio-impl\\src\\Service\\Test.php(97): Fusio\\Impl\\Service\\Test\\Runner->run(Object(Fusio\\Impl\\Table\\Generated\\TestRow), Object(Fusio\\Impl\\Table\\Generated\\OperationRow), Object(PSX\\OAuth2\\AccessToken))\n#2 C:\\www\\projects\\fusio-impl\\src\\Backend\\Action\\Test\\Run.php(50): Fusio\\Impl\\Service\\Test->run(Object(Fusio\\Impl\\Authorization\\UserContext))\n#3 C:\\www\\projects\\fusio-impl\\vendor\\fusio\\engine\\src\\Processor.php(67): Fusio\\Impl\\Backend\\Action\\Test\\Run->handle(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Parameters), Object(Fusio\\Engine\\Context))\n#4 C:\\www\\projects\\fusio-impl\\src\\Service\\Action\\Invoker.php(78): Fusio\\Engine\\Processor->execute('php+class:\/\/Fus...', Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#5 C:\\www\\projects\\fusio-impl\\src\\Controller\\ActionController.php(60): Fusio\\Impl\\Service\\Action\\Invoker->invoke(Object(Fusio\\Engine\\Request), Object(Fusio\\Engine\\Context))\n#6 C:\\www\\projects\\fusio-impl\\src\\Framework\\Filter\\ActionExecutor.php(91): Fusio\\Impl\\Controller\\ActionController->execute(Object(Fusio\\Engine\\Request), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#7 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Framework\\Filter\\ActionExecutor->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#8 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Logger.php(60): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#9 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Logger->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#10 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\RequestLimit.php(63): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#11 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\RequestLimit->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#12 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Authentication.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#13 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Authentication->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#14 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Operation.php(91): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#15 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Operation->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#16 C:\\www\\projects\\fusio-impl\\src\\Controller\\Filter\\Tenant.php(57): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#17 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): Fusio\\Impl\\Controller\\Filter\\Tenant->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#18 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\UserAgentEnforcer.php(43): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#19 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\UserAgentEnforcer->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#20 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\CORS.php(86): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#21 C:\\www\\projects\\fusio-impl\\vendor\\psx\\http\\src\\Filter\\FilterChain.php(86): PSX\\Http\\Filter\\CORS->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(PSX\\Http\\Filter\\FilterChain))\n#22 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(97): PSX\\Http\\Filter\\FilterChain->handle(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#23 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Loader\\Loader.php(72): PSX\\Framework\\Loader\\Loader->execute(Array, Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#24 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Dispatch\\Dispatch.php(86): PSX\\Framework\\Loader\\Loader->load(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response), Object(Fusio\\Impl\\Framework\\Loader\\Context))\n#25 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(44): PSX\\Framework\\Dispatch\\Dispatch->route(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#26 C:\\www\\projects\\fusio-impl\\vendor\\psx\\framework\\src\\Test\\ContainerTestCaseTrait.php(56): PSX\\Framework\\Test\\ControllerDbTestCase->loadController(Object(PSX\\Http\\Request), Object(PSX\\Http\\Response))\n#27 C:\\www\\projects\\fusio-impl\\tests\\Backend\\Api\\Test\\CollectionTest.php(42): PSX\\Framework\\Test\\ControllerDbTestCase->sendRequest('\/backend\/test', 'POST', Array, '[]')\n#28 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(1188): Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest->testGet()\n#29 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(686): PHPUnit\\Framework\\TestCase->runTest()\n#30 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestRunner.php(105): PHPUnit\\Framework\\TestCase->runBare()\n#31 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestCase.php(516): PHPUnit\\Framework\\TestRunner->run(Object(Fusio\\Impl\\Tests\\Backend\\Api\\Test\\CollectionTest))\n#32 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestCase->run()\n#33 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\Framework\\TestSuite.php(374): PHPUnit\\Framework\\TestSuite->run()\n#34 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\TestRunner.php(64): PHPUnit\\Framework\\TestSuite->run()\n#35 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\src\\TextUI\\Application.php(203): PHPUnit\\TextUI\\TestRunner->run(Object(PHPUnit\\TextUI\\Configuration\\Configuration), Object(PHPUnit\\Runner\\ResultCache\\DefaultResultCache), Object(PHPUnit\\Framework\\TestSuite))\n#36 C:\\www\\projects\\fusio-impl\\vendor\\phpunit\\phpunit\\phpunit(104): PHPUnit\\TextUI\\Application->run(Array)\n#37 {main}"
        },
        {
            "id": 2,
            "status": 4,
            "operationName": "inspect.delete",
            "message": "Missing parameter \"foo\" in path"
        },
        {
            "id": 4,
            "status": 4,
            "operationName": "inspect.patch",
            "message": "Missing parameter \"foo\" in path"
        },
        {
            "id": 6,
            "status": 4,
            "operationName": "inspect.put",
            "message": "Missing parameter \"foo\" in path"
        },
        {
            "id": 5,
            "status": 4,
            "operationName": "inspect.post",
            "message": "Missing parameter \"foo\" in path"
        },
        {
            "id": 3,
            "status": 4,
            "operationName": "inspect.get",
            "message": "Missing parameter \"foo\" in path"
        },
        {
            "id": 14,
            "status": 4,
            "operationName": "test.createFoo",
            "message": "Expected status code 201 got 400"
        },
        {
            "id": 1,
            "status": 4,
            "operationName": "test.listFoo",
            "message": "\/entry must be of type object"
        }
    ]
}
JSON;

        $this->assertEquals(200, $response->getStatusCode(), $body);
        $this->assertJsonStringEqualsJsonString($expect, $body, $body);
    }

    public function testPost()
    {
        $response = $this->sendRequest('/backend/test', 'POST', array(
            'User-Agent'    => 'Fusio TestCase',
            'Authorization' => 'Bearer da250526d583edabca8ac2f99e37ee39aa02a3c076c0edc6929095e20ca18dcf'
        ), json_encode([
        ]));

        $body   = (string) $response->getBody();
        $expect = <<<'JSON'
{
    "success": true,
    "message": "Tests successfully executed"
}
JSON;

        $this->assertEquals(200, $response->getStatusCode(), $body);
        $this->assertJsonStringEqualsJsonString($expect, $body, $body);
    }

    public function testPut()
    {
        $response = $this->sendRequest('/backend/test', 'PUT', array(
            'User-Agent'    => 'Fusio TestCase',
            'Authorization' => 'Bearer da250526d583edabca8ac2f99e37ee39aa02a3c076c0edc6929095e20ca18dcf'
        ), json_encode([
        ]));

        $body   = (string) $response->getBody();
        $expect = <<<'JSON'
{
    "success": true,
    "message": "Tests successfully refreshed"
}
JSON;

        $this->assertEquals(200, $response->getStatusCode(), $body);
        $this->assertJsonStringEqualsJsonString($expect, $body, $body);
    }

    public function testDelete()
    {
        $response = $this->sendRequest('/backend/test', 'DELETE', array(
            'User-Agent'    => 'Fusio TestCase',
            'Authorization' => 'Bearer da250526d583edabca8ac2f99e37ee39aa02a3c076c0edc6929095e20ca18dcf'
        ), json_encode([
            'foo' => 'bar',
        ]));

        $body = (string) $response->getBody();

        $this->assertEquals(404, $response->getStatusCode(), $body);
    }

    protected function isTransactional(): bool
    {
        return false;
    }
}
